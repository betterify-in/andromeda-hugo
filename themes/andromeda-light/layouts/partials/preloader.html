{{/*  {{ if site.Params.preloader.enable }}
<div class="preloader">

  <!-- get image path -->
  {{ $preloaderPath:= site.Params.preloader.preloader }}
  {{ if $preloaderPath }}

  <!-- check image existence -->
  {{ if fileExists (add `assets/` $preloaderPath) }}
  {{ $preloader:= resources.Get $preloaderPath }}

  <!-- image extension -->
  {{ $preloader_ext := path.Ext $preloader }}
  <!-- image width -->
  {{ $preloader_width := $preloader.Width }}

  <!-- not gif -->
  {{ if ne $preloader_ext ".gif" }}
  <!-- webp image -->
  {{ $option_webp := add (add (string $preloader_width) "x") " webp" }}
  {{ .Scratch.Set "preloader" ($preloader.Resize $option_webp).RelPermalink }}
  <!-- fallback image -->
  {{ $option := add (string $preloader_width) "x" }}
  {{ .Scratch.Set "preloader_fallback" ($preloader.Resize $option).RelPermalink }}

  <!-- gif image -->
  {{ else }}
  {{ .Scratch.Set "preloader" $preloader.RelPermalink }}
  {{ end }}

  <img class="img-fluid la-spin" loading="preload" decoding="async" src="{{.Scratch.Get `preloader`}}" aria-label="preloader" title="preloader"
    onerror="this.onerror=null;this.src='{{.Scratch.Get `preloader_fallback`}}'" alt="preloader">
  {{ end }}
  {{ end }}
  <!-- /check image existence -->

</div>
{{ end }}  */}}

{{ if site.Params.preloader.enable }}
<div class="preloader">

  {{ $preloaderPath := site.Params.preloader.preloader }}
  {{ if $preloaderPath }}

    {{ $ext := lower (path.Ext $preloaderPath) }}

    {{ if eq $ext ".svg" }}
      <!-- SVG: use as-is, no processing -->
      <img class="img-fluid la-spin" loading="preload" decoding="async" src="{{ $preloaderPath | relURL }}" aria-label="preloader" title="preloader" alt="preloader">
    {{ else }}
      {{ if fileExists (add `assets/` $preloaderPath) }}
        {{ $preloader := resources.Get $preloaderPath }}
        {{ $preloader_ext := path.Ext $preloader }}
        {{ $preloader_width := $preloader.Width }}

        {{ if ne $preloader_ext ".gif" }}
          {{ $option_webp := add (add (string $preloader_width) "x") " webp" }}
          {{ .Scratch.Set "preloader" ($preloader.Resize $option_webp).RelPermalink }}
          {{ $option := add (string $preloader_width) "x" }}
          {{ .Scratch.Set "preloader_fallback" ($preloader.Resize $option).RelPermalink }}
        {{ else }}
          {{ .Scratch.Set "preloader" $preloader.RelPermalink }}
        {{ end }}

        <img class="img-fluid la-spin" loading="preload" decoding="async" src="{{ .Scratch.Get `preloader` }}" aria-label="preloader" title="preloader"
          onerror="this.onerror=null;this.src='{{ .Scratch.Get `preloader_fallback` }}'" alt="preloader">
      {{ end }}
    {{ end }}

  {{ end }}

</div>
{{ end }}
